# 可視ツール監視対象定義書
*作成日: 2025-07-28*
*ツール名: stable_metric_extractor.cjs*

## 📋 このツールが監視する対象

### 1. **抽出安定性テスト**
**測定対象:**
- 同じHTMLファイルから同じ数値を5回連続で抽出できるか

**具体的チェック:**
```
ファイル: /logs/inspector-visual-dashboard.html
抽出項目: 
  - アプリ統計セクションの総アプリ数
  - 本番デプロイ済み数
  - 開発中数
  - URL健全性の成功率

テスト方法: 5回連続実行 → 全て同じ値 = 100%安定性
```

**客観性:** 
- ✅ HTMLコンテンツは固定
- ✅ 正規表現パターンは固定
- ✅ 同じ入力 → 同じ出力が保証される

### 2. **データ整合性比較**
**測定対象:**
- Dashboard表示値 vs 実データファイルの値

**具体的チェック:**
```
比較ファイル:
  Dashboard: /logs/inspector-visual-dashboard.html
  実データ: /logs/published-apps-inventory.json

比較項目:
  - アプリ数: dashboard.app_count vs inventory.totalApps
  - 正常アプリ: dashboard.working_apps vs inventory.workingApps.length
  - 成功率: dashboard.success_rate vs inventory.summary.successRate

計算方法: 一致項目数 / 総項目数 × 100 = 整合性%
```

**客観性:**
- ✅ ファイル内容は事実
- ✅ 数値比較は機械的判定
- ✅ 一致/不一致は主観なし

### 3. **測定できないもの (除外対象)**
**❌ 主観的要素:**
- 「基本的な機能」の良し悪し
- 「品質」の評価
- 「効率」の感覚的判断

**❌ 実行時動的要素:**
- ツールの実際の動作結果
- パフォーマンス測定
- ユーザー体験

## 🎯 このツールの限界と範囲

### ✅ **確実に測定できること**
1. **ファイル存在確認** - 客観的事実
2. **数値の抽出・比較** - 機械的処理
3. **テキストパターンマッチ** - 再現可能

### ❌ **測定できないこと**
1. **機能の品質** - 主観的評価
2. **実行時の動作** - 動的測定が必要
3. **ユーザー満足度** - 人的評価が必要

## 🔧 100回同じ結果を保証する設計

### **入力の固定化**
```
同じファイル + 同じ正規表現 = 同じ抽出結果
```

### **計算の機械化**
```
数値比較: if (A === B) → 一致
割合計算: Math.round((一致数 / 総数) × 100)
```

### **主観要素の完全排除**
```
❌ 「良い/悪い」の判断なし
❌ 「だいたい」の評価なし  
❌ 「感覚的に」の判定なし
```

## 📊 このツールで測定可能な指標

### **信頼できる指標**
1. **抽出安定性: 0-100%** (5回テストの一致率)
2. **データ整合性: 0-100%** (Dashboard vs 実データ一致率)
3. **ファイル完整性: 0-100%** (必要ファイル存在率)

### **測定不可な指標**
1. ツール実行成功率 (実行が必要)
2. コード品質 (主観的評価)
3. ユーザー体験 (人的判断)

---

## ⚠️ 重要な注意事項

**このツールは「ファイルベースの客観的事実」のみを測定します。**
**システム全体の性能や品質を測定するものではありません。**
**あくまで「データの整合性と抽出の安定性」に特化したツールです。**